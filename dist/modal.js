// Generated by CoffeeScript 1.12.1
(function() {
  var DEFAULTS, Modal, Utils, createModal;

  Utils = {
    matches: function(element, selector) {
      var matchesSelector;
      matchesSelector = element.matches || element.webkitMatchesSelector || element.mozMatchesSelector || element.msMatchesSelector;
      return matchesSelector.call(element, selector);
    }
  };

  DEFAULTS = {
    activeClass: 'is-shown',
    transitionClass: 'is-fading'
  };

  Modal = {
    isShown: false,
    init: function(options) {
      this.options = Object.assign({}, DEFAULTS, options);
      this.element = this.options.element;
      this.attachHandlers();
      return this;
    },
    attachHandlers: function() {
      this.element.addEventListener('transitionend', (function(_this) {
        return function() {
          if (_this.element.classList.contains(_this.options.activeClass) && !_this.element.classList.contains(_this.options.transitionClass)) {
            return _this.element.classList.remove(_this.options.activeClass);
          }
        };
      })(this));
      return this;
    },
    show: function() {
      this.element.classList.add(this.options.activeClass);
      this.forceReflow();
      this.element.classList.add(this.options.transitionClass);
      this.isShown = true;
      return this;
    },
    hide: function() {
      this.element.classList.remove(this.options.transitionClass);
      this.isShown = false;
      return this;
    },
    toggle: function() {
      this[this.isShown ? 'hide' : 'show']();
      return this;
    },
    forceReflow: function() {
      window.getComputedStyle(this.element, null).display;
      return this;
    }
  };

  createModal = function() {
    return Object.create(Modal);
  };

  document.addEventListener('click', function(event) {
    var componentId, matches, modal, toggle;
    matches = Utils.matches;
    if (matches(event.target, '[data-toggle="modal"]')) {
      toggle = event.target;
      componentId = toggle.getAttribute('data-component-id');
      if (!componentId) {
        modal = createModal().init({
          element: document.querySelector(toggle.getAttribute('data-target'))
        });
        componentId = String(new Date().getTime());
        window._components || (window._components = {});
        window._components[componentId] = modal;
        toggle.setAttribute('data-component-id', componentId);
      }
      modal = window._components[componentId];
      return modal.toggle();
    }
  });

}).call(this);
